<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan Garan & Reni</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Great+Vibes&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --dark: #1a1a1a; --cream: #f9f4e8; }
        * { box-sizing: border-box; scroll-behavior: smooth; }
        body { margin: 0; font-family: 'Montserrat', sans-serif; background: var(--cream); color: var(--dark); overflow: hidden; }

        /* Layar Sampul (Cover) */
        #cover {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1537633552985-df8429e8048b?q=80&w=2000&auto=format&fit=crop');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; z-index: 2000; transition: transform 0.8s ease-in-out;
        }
        #cover h2 { font-family: 'Great Vibes', cursive; font-size: 4rem; color: var(--gold); margin: 10px 0; }
        .guest-box { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px; border: 1px solid var(--gold); }

        /* Main Content */
        #main-content { display: none; overflow-y: auto; height: 100vh; }
        .section { padding: 80px 20px; max-width: 800px; margin: 0 auto; text-align: center; }
        h1 { font-family: 'Great Vibes', cursive; font-size: 4.5rem; color: var(--gold); }
        h2 { font-family: 'Cinzel', serif; border-bottom: 2px solid var(--gold); display: inline-block; padding-bottom: 5px; }

        /* Form & Gallery */
        .rsvp-form { background: white; padding: 30px; border-radius: 10px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; }
        .btn { background: var(--gold); color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; font-weight: 600; width: 100%; }
        .pesan-card { background: white; padding: 15px; margin-bottom: 10px; border-radius: 5px; border-left: 5px solid var(--gold); text-align: left; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        /* Floating Music */
        .music-btn { position: fixed; bottom: 30px; right: 30px; width: 55px; height: 55px; background: var(--gold); border: none; border-radius: 50%; color: white; font-size: 24px; cursor: pointer; z-index: 1000; display: none; }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
    </audio>

    <div id="cover">
        <p>UNDANGAN PERNIKAHAN</p>
        <h2>Garan & Reni</h2>
        <div class="guest-box">
            <p>Kepada Yth. Bapak/Ibu/Saudara/i:</p>
            <h3 id="guestName">Nama Tamu</h3>
        </div>
        <button class="btn" onclick="openInvitation()" style="width: auto;">Buka Undangan</button>
    </div>

    <div id="main-content">
        <section class="section">
            <p>SABTU, 01 APRIL 2026</p>
            <h1>Garan & Reni</h1>
            <p>Kami mengundang Anda untuk merayakan kebahagiaan kami.</p>
        </section>

        <section class="section">
            <h2>Buku Kehadiran</h2>
            <div class="rsvp-form">
                <form id="rsvpForm">
                    <input type="text" id="namaTamu" placeholder="Nama Anda" required>
                    <select id="statusHadir" required>
                        <option value="">Konfirmasi Kehadiran</option>
                        <option value="Hadir">Hadir</option>
                        <option value="Tidak Hadir">Tidak Hadir</option>
                    </select>
                    <textarea id="pesanTamu" placeholder="Ucapan Doa" rows="4" required></textarea>
                    <button type="submit" class="btn">Kirim Pesan</button>
                </form>
            </div>
            <div id="daftarPesan"></div>
        </section>
        
        <footer style="padding: 40px; background: var(--dark); color: var(--gold);">
            <p>&copy; 2026 Garan & Reni</p>
        </footer>
    </div>

    <button class="music-btn" id="musicBtn" onclick="toggleMusic()">ðŸŽµ</button>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxXdAr0KfGMTHvJeMEhIEFbMIKa5E2UZjvdZAbzxNgW_Qcs05GYMbghLgMPC_Evk2pflQ/exec';
        
        // Fitur Nama Tamu Dinamis (URL ?to=Nama)
        const urlParams = new URLSearchParams(window.location.search);
        const to = urlParams.get('to');
        if (to) { document.getElementById('guestName').innerText = to.replace(/\+/g, ' '); }

        // Buka Undangan & Play Musik
        function openInvitation() {
            document.getElementById('cover').style.transform = 'translateY(-100%)';
            document.getElementById('main-content').style.display = 'block';
            document.body.style.overflow = 'auto';
            document.getElementById('musicBtn').style.display = 'flex';
            toggleMusic(); 
        }

        const music = document.getElementById("bgMusic");
        const btn = document.getElementById("musicBtn");
        function toggleMusic() {
            if (music.paused) { music.play(); btn.innerHTML = "â¸ï¸"; } 
            else { music.pause(); btn.innerHTML = "ðŸŽµ"; }
        }

        // Ambil data dari Google Sheets
        function ambilPesan() {
            fetch(scriptURL).then(res => res.json()).then(data => {
                const daftar = document.getElementById('daftarPesan');
                daftar.innerHTML = "";
                data.reverse().forEach(item => {
                    const card = document.createElement('div');
                    card.className = "pesan-card";
                    card.innerHTML = `<strong>${item.nama}</strong> <small>(${item.status})</small><p>"${item.pesan}"</p>`;
                    daftar.appendChild(card);
                });
            });
        }
        ambilPesan();

        // Kirim data ke Google Sheets
        document.getElementById('rsvpForm').addEventListener('submit', e => {
            e.preventDefault();
            const btnSimpan = e.target.querySelector('button');
            btnSimpan.innerText = "Mengirim...";
            fetch(scriptURL, { method: 'POST', body: JSON.stringify({
                nama: document.getElementById('namaTamu').value,
                status: document.getElementById('statusHadir').value,
                pesan: document.getElementById('pesanTamu').value
            })}).then(() => {
                alert('Pesan terkirim!');
                e.target.reset();
                btnSimpan.innerText = "Kirim Pesan";
                ambilPesan();
            });
        });
    </script>
</body>
</html>
